{"version":3,"sources":["redux/constant.js","redux/reducers/wInfoDay.js","redux/reducers/wInfoWeek.js","redux/store.js","util/getWeatherIcon.js","components/Buttom.jsx","api/api.jsx","redux/actions/wInfoDay.js","redux/actions/wInfoWeek.js","App.jsx","index.jsx"],"names":["REFRESH","REFRESH_WEEK","initState","temperature","NaN","humid","weatherType","locationName","obsDate","obsHrMin","dateWeekArr","wTypeWeekArr","lowestTempWeekArr","highestTempWeekArr","allReducers","combineReducers","wInfoResult","preState","action","type","data","parseFloat","split","wInfoWeekResult","i","length","replace","createStore","applyMiddleware","thunk","wTwEnComparison","Map","wTypeListArr","handleDayIcon","wTypeDay","findIcon","undefined","includes","getDayWIcon","wTypeDayResult","has","get","Buttom","handleWeekData","wInfoWeek","store","getState","wInfoWeekArr","date","wType","highestTemp","loweshestTemp","handleWTypeSvg","viewBox","className","cx","cy","r","style","width","height","x1","y1","x2","y2","viewbox","this","map","items","keys","Component","Region","regionCode","臺北","臺中","嘉義","高雄","wInfoDayAPI","regionName","endpoint","axios","then","res","weatherElements","records","location","weatherElement","find","item","elementName","parameter","parameterName","obsTime","time","dispatch","parseInt","elementValue","parameterValue","regionCodeValue","locations","Array","fill","j","inThreeDays","startTime","value","dataObj","console","log","wInfoWeekAction","result","catch","err","wInfoWeekAPI","App","state","debounceTimer","refreshInfo","a","selectedRegion","wResponseInfo","debounceHandler","cb","timing","clearTimeout","setTimeout","testInfo","wInfo","src","alt","ref","cNode","label","onClick","ReactDOM","render","document","getElementById","subscribe"],"mappings":"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","file":"static/js/main.285d5a9b.chunk.js","sourcesContent":["export const REFRESH='refresh';\r\nexport const REFRESH_WEEK='refresh_week';","import { REFRESH } from \"../constant\";\r\n\r\nconst initState = {\r\n  temperature: NaN,\r\n  humid: \"\",\r\n  weatherType: \"\",\r\n  locationName: \"\",\r\n  obsDate: \"\",\r\n  obsHrMin: \"\",\r\n};\r\nexport default function wInfoDayReducer(preState = initState, action) {\r\n  const { type, data } = action;\r\n  switch (type) {\r\n    case REFRESH:\r\n      let {\r\n        temperature,\r\n        humid,\r\n        weatherType,\r\n        locationName,\r\n        obsDate,\r\n        obsHrMin,\r\n      } = data;\r\n      // console.log(weatherType);\r\n      humid=parseFloat(humid)*100; \r\n      obsHrMin=obsHrMin.split(\":\")[0]+\":\"+obsHrMin.split(\":\")[1];\r\n\r\n      /* switch (weatherType) {\r\n        case \"晴\":\r\n          weatherType = \"sunny\";\r\n          break;\r\n        case \"風\":\r\n          weatherType = \"airflow_wind\";\r\n          break;\r\n        case \"多雲\":\r\n          weatherType = \"cloudy\";\r\n          break;\r\n        case \"雨\":\r\n          weatherType = \"raining\";\r\n          break;\r\n        default:\r\n          weatherType = \"warning_error\";\r\n      } */\r\n\r\n      return {\r\n        ...preState,\r\n        temperature,\r\n        humid,\r\n        weatherType,\r\n        locationName,\r\n        obsDate,\r\n        obsHrMin,\r\n      };\r\n    default:\r\n      return preState;\r\n  }\r\n}\r\n","import { REFRESH_WEEK } from \"../constant\";\r\nconst initState = {\r\n  dateWeekArr: [],\r\n  wTypeWeekArr: [],\r\n  lowestTempWeekArr:[],\r\n  highestTempWeekArr:[],\r\n};\r\nexport default function wInfoWeekReducer(preState = initState, action) {\r\n  const { type, data } = action;\r\n  switch (type) {\r\n    case REFRESH_WEEK:\r\n      let { dateWeekArr, wTypeWeekArr,lowestTempWeekArr,highestTempWeekArr } = data;      \r\n\r\n      for(let i=0;i<dateWeekArr.length;i++){        \r\n        dateWeekArr[i]=dateWeekArr[i].split(\" \")[0].split(\"-\")[1]+\"/\"+dateWeekArr[i].split(\" \")[0].split(\"-\")[2];\r\n        lowestTempWeekArr[i]=lowestTempWeekArr[i].split('至')[0].split('氏')[1];\r\n        highestTempWeekArr[i]=highestTempWeekArr[i].split('至')[1].replace(/\\度/,'');\r\n      }\r\n      return { ...preState, dateWeekArr, wTypeWeekArr,lowestTempWeekArr,highestTempWeekArr };\r\n    default:\r\n      return preState;\r\n  }\r\n}\r\n","import { createStore, combineReducers, applyMiddleware } from \"redux\";\r\nimport thunk from \"redux-thunk\";\r\nimport wInfoDayReducer from \"./reducers/wInfoDay\";\r\nimport wInfoWeekReducer from \"./reducers/wInfoWeek\";\r\n\r\nconst allReducers = combineReducers({\r\n  wInfoResult: wInfoDayReducer,\r\n  wInfoWeekResult: wInfoWeekReducer,\r\n});\r\n\r\nexport default createStore(allReducers,applyMiddleware(thunk));\r\n// export default createStore(allReducers);\r\n","const wTwEnComparison = new Map([\r\n  [\"雪\", \"sn\"],\r\n  [\"雷\", \"t\"],\r\n  [\"電\", \"t\"],\r\n  [\"大雨\", \"hr\"],\r\n  [\"雨\", \"lr\"],\r\n  [\"多雲\", \"hc\"],\r\n  [\"雲\", \"lc\"],\r\n  [\"晴\", \"c\"],\r\n  [\"陰\",\"hc\"]\r\n]);\r\n\r\nconst wTypeListArr = [\"雪\", \"雷\", \"電\", \"大雨\", \"雨\", \"多雲\", \"雲\", \"晴\",\"陰\"];\r\n\r\nconst iconUrl = \"https://www.metaweather.com/static/img/weather/\";\r\n\r\nexport function handleDayIcon(wTypeDay) {\r\n  let findIcon = false;\r\n  if(wTypeDay===undefined) wTypeDay=\"雲\";\r\n  for (let i = 0; i < wTypeListArr.length; i++) {\r\n    if (wTypeDay.includes(wTypeListArr[i])) {\r\n      findIcon = true;\r\n      return wTypeListArr[i];\r\n    }\r\n  }\r\n  if (!findIcon) {\r\n    return \"無法對應天氣類型\";\r\n  }\r\n}\r\n\r\nexport const getDayWIcon = (wTypeDay) => {\r\n  let wTypeDayResult = handleDayIcon(wTypeDay);\r\n\r\n  if (!wTwEnComparison.has(wTypeDayResult)) {\r\n    //若天氣類型無法辦別\r\n    return \"無法獲取天氣類型圖片\";\r\n  }\r\n  return `${iconUrl}${wTwEnComparison.get(wTypeDayResult)}.svg`;\r\n};\r\n","import React, { Component } from \"react\";\r\nimport store from \"../redux/store\";\r\nimport { handleDayIcon } from \"../util/getWeatherIcon\";\r\nimport \"./Button.css\";\r\n\r\nexport default class Buttom extends Component {\r\n  handleWeekData = () => {\r\n    let allwInfo = store.getState();\r\n    let wInfoWeek = allwInfo.wInfoWeekResult;\r\n    // console.log(wInfoWeek);\r\n    let wInfoWeekArr = [];\r\n    for (let i = 0; i < 7; i++) {\r\n      wInfoWeekArr[i] = {\r\n        date: wInfoWeek.dateWeekArr[i],\r\n        wType: wInfoWeek.wTypeWeekArr[i],\r\n        highestTemp: wInfoWeek.highestTempWeekArr[i],\r\n        loweshestTemp: wInfoWeek.lowestTempWeekArr[i],\r\n      };\r\n    }\r\n    return wInfoWeekArr;\r\n  };\r\n\r\n  handleWTypeSvg = (wType) => {\r\n    if (wType === \"晴\") {\r\n      return (\r\n        <svg viewBox=\"-50 -50 100 100\">\r\n          <circle className=\"sun\" cx=\"0\" cy=\"0\" r=\"20\"></circle>\r\n        </svg>\r\n      );\r\n    } else if (wType === \"雲\" || wType === \"多雲\" || wType === \"陰\") {\r\n      return (\r\n        <svg\r\n          style={{ width: \"40px\", height: \"40px\" }}\r\n          viewBox=\"-50 -50 100 100\"\r\n        >\r\n          <circle className=\"sun\" cx=\"0\" cy=\"0\" r=\"20\"></circle>\r\n          <circle className=\"cloud\" cx=\"0\" cy=\"25\" r=\"20\"></circle>\r\n          <circle className=\"cloud\" cx=\"-15\" cy=\"25\" r=\"20\"></circle>\r\n          <circle className=\"cloud\" cx=\"-30\" cy=\"25\" r=\"20\"></circle>\r\n          <circle className=\"cloud\" cx=\"-25\" cy=\"5\" r=\"15\"></circle>\r\n          <circle className=\"cloud\" cx=\"-7\" cy=\"10\" r=\"15\"></circle>\r\n        </svg>\r\n      );\r\n    } else if (wType === \"雨\" || wType === \"大雨\") {\r\n      return (\r\n        <svg viewBox=\"-63 -30 100 100\">\r\n          <line className=\"rain\" x1=\"-25\" y1=\"15\" x2=\"-25\" y2=\"35\"></line>\r\n          <line className=\"rain\" x1=\"-14\" y1=\"5\" x2=\"-14\" y2=\"25\"></line>\r\n          <line className=\"rain\" x1=\"-5\" y1=\"20\" x2=\"-5\" y2=\"45\"></line>\r\n          <circle className=\"cloud\" cx=\"0\" cy=\"30\" r=\"20\"></circle>\r\n          <circle className=\"cloud\" cx=\"-15\" cy=\"30\" r=\"20\"></circle>\r\n          <circle className=\"cloud\" cx=\"-30\" cy=\"30\" r=\"20\"></circle>\r\n          <circle className=\"cloud\" cx=\"-25\" cy=\"10\" r=\"15\"></circle>\r\n          <circle className=\"cloud\" cx=\"-7\" cy=\"15\" r=\"15\"></circle>\r\n        </svg>\r\n      );\r\n    } else {\r\n      return (\r\n        <svg viewbox=\"-50 -50 100 100\">\r\n          <circle className=\"sun\" cx=\"0\" cy=\"0\" r=\"20\"></circle>\r\n          <circle className=\"cloud\" cx=\"0\" cy=\"25\" r=\"20\"></circle>\r\n          <circle className=\"cloud\" cx=\"-15\" cy=\"25\" r=\"20\"></circle>\r\n          <circle className=\"cloud\" cx=\"-30\" cy=\"25\" r=\"20\"></circle>\r\n          <circle className=\"cloud\" cx=\"-25\" cy=\"5\" r=\"15\"></circle>\r\n          <circle className=\"cloud\" cx=\"-7\" cy=\"10\" r=\"15\"></circle>\r\n        </svg>\r\n      );\r\n    }\r\n  };\r\n\r\n  render() {\r\n    let wInfoWeekArr = this.handleWeekData();\r\n    // console.log(wInfoWeek.dateWeekArr[0]);\r\n    return (\r\n      <div className=\"bottom\">\r\n        {wInfoWeekArr.map((items,keys) => (\r\n          <div className=\"dayweather\" key={keys}>\r\n            <h3>{items.date}</h3>                        \r\n            <h3>{items.highestTemp}°C</h3>\r\n            <h3 className=\"loweshestTemp\">{items.loweshestTemp}°C</h3>\r\n            {this.handleWTypeSvg(handleDayIcon(items.wType))}            \r\n            <h4>{items.wType}</h4>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import axios from \"axios\";\r\nimport store from \"../redux/store\";\r\nimport { wInfoDayAction } from \"../redux/actions/wInfoDay\";\r\nimport { wInfoWeekAction } from \"../redux/actions/wInfoWeek\";\r\n\r\nexport const Region = {\r\n  TAIPEI: \"臺北\",\r\n  TAICHUNG: \"臺中\",\r\n  CHIAYI: \"嘉義\",\r\n  KOAHSIUNG: \"高雄\", //高雄地區當日天氣，數據偶發異常，暫以嘉義代替\r\n};\r\n/* 適用一週天氣預報 */\r\nconst regionCode = {\r\n  臺北: \"F-D0047-063\",\r\n  臺中: \"F-D0047-075\",\r\n  嘉義: \"F-D0047-031\",\r\n  高雄: \"F-D0047-067\",\r\n};\r\n\r\nexport const wInfoDayAPI = (regionName) => {\r\n  const endpoint = `https://opendata.cwb.gov.tw/api/v1/rest/datastore/O-A0003-001?Authorization=CWB-507B37E0-0383-4D8C-878D-628B54EC3536&locationName=${regionName}`;\r\n\r\n  axios\r\n    .get(endpoint)\r\n    .then((res) => {\r\n      const weatherElements = res.data.records.location[0].weatherElement;\r\n\r\n      const temperature = weatherElements.find((item) => {\r\n        return item.elementName === \"TEMP\";\r\n      });\r\n      const humid = weatherElements.find((item) => {\r\n        return item.elementName === \"HUMD\";\r\n      });\r\n      const weatherType = weatherElements.find((item) => {\r\n        return item.elementName === \"Weather\";\r\n      });\r\n\r\n      const parameters = res.data.records.location[0].parameter;\r\n\r\n      const locationName = parameters.find((item) => {\r\n        return item.parameterName === \"CITY\";\r\n      });\r\n\r\n      const obsTime = res.data.records.location[0].time.obsTime;\r\n      const obsDate = obsTime.split(\" \")[0];\r\n      const obsHrMin = obsTime.split(\" \")[1];\r\n\r\n      store.dispatch(\r\n        wInfoDayAction({\r\n          temperature: parseInt(temperature.elementValue),\r\n          humid: humid.elementValue,\r\n          weatherType: weatherType.elementValue,\r\n          locationName: locationName.parameterValue,\r\n          obsDate,\r\n          obsHrMin,\r\n        })\r\n      );\r\n\r\n      wInfoWeekAPI(regionCode[regionName]);\r\n    })\r\n    .catch((err) => console.log(\"獲取當日天氣錯誤，其原因為\", err));\r\n};\r\n\r\nfunction wInfoWeekAPI(regionCodeValue) {\r\n  const endpoint = `https://opendata.cwb.gov.tw/api/v1/rest/datastore/${regionCodeValue}?Authorization=CWB-507B37E0-0383-4D8C-878D-628B54EC3536&format=JSON&elementName=WeatherDescription&sort=time`;\r\n  axios\r\n    .get(endpoint)\r\n    .then((res) => {\r\n      let weatherElement =\r\n        res.data.records.locations[0].location[0].weatherElement[0];\r\n\r\n      let dateWeekArr = new Array(7).fill(null);\r\n      let wTypeWeekArr = new Array(7).fill(null);\r\n      let lowestTempWeekArr = new Array(7).fill(null);\r\n      let highestTempWeekArr = new Array(7).fill(null);\r\n\r\n      let j = 0;\r\n      let inThreeDays = 0; //判別是否超出3天\r\n      for (let i = 1; i <= 13; i += 2) {\r\n        dateWeekArr[j] = weatherElement.time[i].startTime;\r\n        wTypeWeekArr[j] =\r\n          weatherElement.time[i].elementValue[0].value.split(\"。\")[0];\r\n        if (i >= 7) {\r\n          inThreeDays = -1; //如果超過3天，會少掉降雨機率的欄位\r\n        } else {\r\n          inThreeDays = 0;\r\n        }\r\n        lowestTempWeekArr[j] =\r\n          weatherElement.time[i].elementValue[0].value.split(\"。\")[\r\n            2 + inThreeDays\r\n          ];\r\n\r\n        highestTempWeekArr[j] =\r\n          weatherElement.time[i].elementValue[0].value.split(\"。\")[\r\n            2 + inThreeDays\r\n          ];\r\n        j++;\r\n      }\r\n\r\n      let dataObj = {\r\n        dateWeekArr,\r\n        wTypeWeekArr,\r\n        lowestTempWeekArr,\r\n        highestTempWeekArr,\r\n      };\r\n      console.log(dataObj);\r\n      store.dispatch(wInfoWeekAction(dataObj));\r\n\r\n      let result = store.getState();\r\n      console.log(result);\r\n    })\r\n    .catch((err) => {\r\n      console.log(\"獲取一週天氣錯誤，其原因為\", err);\r\n    });\r\n}\r\n","import { REFRESH } from \"../constant\"\r\n\r\nexport const wInfoDayAction=(data)=>({type:REFRESH,data})","import { REFRESH_WEEK } from \"../constant\"\r\n\r\nexport const wInfoWeekAction=(dataObj)=>({type:REFRESH_WEEK,data:dataObj})","import React, { Component } from \"react\";\r\nimport store from \"./redux/store\";\r\nimport Buttom from \"./components/Buttom\";\r\nimport { wInfoDayAPI, Region } from \"./api/api\";\r\nimport { getDayWIcon } from \"./util/getWeatherIcon\";\r\nimport \"./App.css\";\r\n\r\nexport default class App extends Component {\r\n  state = {\r\n    debounceTimer: null,\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.refreshInfo();\r\n    const testInfo = store.getState();\r\n    console.log(testInfo);\r\n  }\r\n\r\n  /* get selected value then call api*/\r\n  refreshInfo = async () => {\r\n    const { value } = this.selectedRegion;\r\n    const wResponseInfo = await wInfoDayAPI(value);\r\n    console.log(wResponseInfo);\r\n  };\r\n\r\n  // 預防頻繁call api\r\n  debounceHandler = (cb, timing) => {\r\n    let debounceTimer = this.state.debounceTimer;\r\n    return () => {\r\n      if (debounceTimer !== null) {\r\n        clearTimeout(debounceTimer);\r\n      }\r\n      debounceTimer = setTimeout(() => {\r\n        cb();\r\n        debounceTimer = null;\r\n      }, timing);\r\n    };\r\n  };\r\n\r\n  render() {\r\n    const allInfo = store.getState();\r\n    let wInfo = allInfo.wInfoResult;\r\n\r\n    return (\r\n      <div className=\"daybox\">\r\n        <label>\r\n          <div className=\"top\">\r\n            <img\r\n              className=\"weatherType\"\r\n              src={getDayWIcon(wInfo.weatherType)}\r\n              alt={wInfo.weatherType}\r\n            />\r\n\r\n            <div className=\"text-area\">\r\n              <div className=\"temperature\">{wInfo.temperature}°C</div>\r\n              <div className=\"address\">地區:&nbsp;{wInfo.locationName}</div>\r\n              <div className=\"infos\">\r\n                <div className=\"humidity\">濕度:&nbsp;{wInfo.humid}%</div>\r\n                <div className=\"time\">日期&emsp;{wInfo.obsDate}</div>\r\n                <div>觀測時間&emsp;{wInfo.obsHrMin}</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"choose-area\">\r\n            <text>選擇地區</text>\r\n            <select ref={(cNode) => (this.selectedRegion = cNode)}>\r\n              <optgroup label=\"北部\"></optgroup>\r\n              <option value={Region.TAIPEI}>{Region.TAIPEI}</option>\r\n              <optgroup label=\"中部\"></optgroup>\r\n              <option value={Region.TAICHUNG}>{Region.TAICHUNG}</option>\r\n              <optgroup label=\"南部\"></optgroup>\r\n              <option value={Region.CHIAYI}>{Region.CHIAYI}</option>\r\n            </select>\r\n            <button onClick={this.debounceHandler(this.refreshInfo, 1000)}>\r\n              刷新\r\n            </button>\r\n          </div>\r\n\r\n          <Buttom />\r\n        </label>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from './App';\r\nimport store from \"./redux/store\";\r\n\r\nReactDOM.render(<App/>,document.getElementById('root'));\r\n\r\nstore.subscribe(()=>{\r\n    ReactDOM.render(<App/>,document.getElementById('root'));\r\n})"],"sourceRoot":""}